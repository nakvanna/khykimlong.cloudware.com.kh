(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[32],{e653:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-card",[e("q-card-actions",{attrs:{align:"left"}},[e("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],staticStyle:{width:"150px"},attrs:{color:"red",icon:"reply",label:"ត្រឡប់ក្រោយ"}},[e("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("ថយក្រោយ")])],1)],1),e("q-card-section",[e("q-form",{ref:"addForm",staticClass:"q-gutter-md",on:{submit:t.onSubmit}},[e("q-card",{staticClass:"my-card bg-grey-1",attrs:{flat:"",bordered:""}},[e("q-card-section",[e("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[e("q-item-label",{staticClass:"col q-my-sm"},[t._v("\n              ឈ្មោះខ្មែរ\n            ")]),e("q-item-label",{staticClass:"col q-my-sm"},[t._v("\n              ឈ្មោះឡាតាំង\n            ")])],1),e("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[e("q-input",{staticClass:"col",attrs:{outlined:"",label:"ឈ្មោះខ្មែរ",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.kh_name,callback:function(a){t.$set(t.data,"kh_name",a)},expression:"data.kh_name"}}),e("q-input",{staticClass:"col",attrs:{outlined:"",label:"ឡាតាំង",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.lt_name,callback:function(a){t.$set(t.data,"lt_name",a)},expression:"data.lt_name"}})],1),e("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[e("q-select",{staticClass:"col-md-4 col-xs-12",attrs:{outlined:"",label:"ភេទ",options:["ស្រី","ប្រុស"],square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមជ្រើសរើសចន្លោះ"}]},model:{value:t.data.gender,callback:function(a){t.$set(t.data,"gender",a)},expression:"data.gender"}}),e("q-input",{staticClass:"col-md-4 col-xs-12",attrs:{outlined:"",label:"អាយុ (35ឆ្នាំ 5ខែ 20ថ្ងៃ)",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.age,callback:function(a){t.$set(t.data,"age",a)},expression:"data.age"}}),e("q-input",{staticClass:"col-md col-xs-12",attrs:{outlined:"",label:"លេខទូរសព្ទ",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.phone,callback:function(a){t.$set(t.data,"phone",a)},expression:"data.phone"}})],1),e("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[e("q-item-label",{staticClass:"q-my-sm"},[t._v("\n              អាស័យដ្ឋានបច្ចុប្បន្ន\n              "),e("q-btn",{attrs:{icon:"add",round:"",flat:"",color:"primary"},on:{click:function(a){return t.$refs.addressBook.show()}}})],1)],1),e("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[e("q-select",{staticClass:"col",attrs:{"use-input":"",outlined:"",label:"ជ្រើសរើស អាស័យដ្ឋានបច្ចុប្បន្ន",options:t.optionsAddressBook,square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមជ្រើសរើសចន្លោះ"}]},on:{filter:t.filterFnAddressBook},model:{value:t.data.current_address_book,callback:function(a){t.$set(t.data,"current_address_book",a)},expression:"data.current_address_book"}})],1),e("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[e("q-uploader",{staticClass:"col",staticStyle:{"max-width":"300px"},attrs:{factory:t.factoryFnUploadPhoto,accept:"image/*","hide-upload-btn":"",label:"ដាក់រូបភាព",color:"grey",square:"",flat:"",bordered:"","auto-upload":""}})],1)]),e("q-card-section",[e("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[e("q-item-label",{staticClass:"col q-my-sm"},[t._v("\n              ពិនិត្យអម\n            ")])],1),e("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[e("q-input",{staticClass:"col-md-8 col-xs-12",attrs:{outlined:"",label:"រោគវិនិច្ឆ័យ",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data_detail.diagnosis,callback:function(a){t.$set(t.data_detail,"diagnosis",a)},expression:"data_detail.diagnosis"}}),e("q-input",{staticClass:"col-md col-xs-12",attrs:{label:"ថ្ងៃចូលពិនិត្យ",outlined:"",square:"",mask:"date",rules:["date"]},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[e("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-date",{on:{input:function(){return t.$refs.qDateProxy.hide()}},model:{value:t.data_detail.date,callback:function(a){t.$set(t.data_detail,"date",a)},expression:"data_detail.date"}})],1)],1)]},proxy:!0}]),model:{value:t.data_detail.date,callback:function(a){t.$set(t.data_detail,"date",a)},expression:"data_detail.date"}})],1),e("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[e("q-input",{staticClass:"col-md-3 col-xs-12",attrs:{outlined:"",label:"TA",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data_detail.ta,callback:function(a){t.$set(t.data_detail,"ta",a)},expression:"data_detail.ta"}}),e("q-input",{staticClass:"col-md-3 col-xs-12",attrs:{outlined:"",label:"T0",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data_detail.t,callback:function(a){t.$set(t.data_detail,"t",a)},expression:"data_detail.t"}}),e("q-input",{staticClass:"col-md-3 col-xs-12",attrs:{outlined:"",label:"SPO2",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data_detail.spo,callback:function(a){t.$set(t.data_detail,"spo",a)},expression:"data_detail.spo"}}),e("q-input",{staticClass:"col-md col-xs-12",attrs:{outlined:"",label:"Poules",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data_detail.poules,callback:function(a){t.$set(t.data_detail,"poules",a)},expression:"data_detail.poules"}})],1),e("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[e("q-input",{staticClass:"col",attrs:{rows:"3",outlined:"",label:"ចំណាំ",type:"textarea",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data_detail.note,callback:function(a){t.$set(t.data_detail,"note",a)},expression:"data_detail.note"}})],1)]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{staticStyle:{width:"150px",height:"50px"},attrs:{icon:"save",color:"primary",label:"រក្សារទុក"},on:{click:function(a){return t.$refs.addForm.submit()}}},[e("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Save")])],1)],1)],1)],1)],1),e("address-book",{ref:"addressBook"})],1)},l=[],o=e("2744"),n={name:"PatientAdd",components:{AddressBook:o["a"]},data:function(){return{dialog:!1,maximizedToggle:!0,formData:new FormData,data:{kh_name:null,lt_name:null,gender:null,age:null,phone:null,current_address_book:null,hostname:"http://localhost:3000/"},data_detail:{diagnosis:null,ta:null,t:null,spo:null,poules:null,note:null,date:null,patient:null},optionsAddressBook:[]}},computed:{getAddressBooks:function(){return this.$store.getters["address_book/getAddressBook"].map((function(t){return{value:t._id,label:"".concat(t.province," - ").concat(t.district," - ").concat(t.commune," - ").concat(t.village)}}))}},methods:{onSubmit:function(){var t=this;console.log(t.data);var a=JSON.stringify(t.data);t.formData.set("data",a),t.$q.loading.show(),t.$store.dispatch("patient/storePatient",t.formData).then((function(a){t.data_detail.patient=a.data._id,a.status?(console.log(t.data_detail),t.$store.dispatch("patient/storePatientDetail",t.data_detail).then((function(a){a.status?(t.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:a.message}),t.isShow=!1,window.history.back(),t.$q.loading.hide()):t.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:a.message})}))):t.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:a.message})}))},filterFnAddressBook:function(t,a,e){var s=this;a((function(){var a=t.toLowerCase();s.optionsAddressBook=s.getAddressBooks.filter((function(t){return t.label.toLowerCase().indexOf(a)>-1}))}))},factoryFnUploadPhoto:function(t){var a=this;a.formData.set("photo",t[0])}}},r=n,i=e("2877"),d=e("eebe"),c=e.n(d),u=e("f09f"),m=e("4b7e"),p=e("9c40"),q=e("05c0"),b=e("a370"),f=e("0378"),g=e("0170"),_=e("27f9"),x=e("ddd8"),v=e("ee89"),h=e("0016"),k=e("7cbe"),y=e("52ee"),C=e("2eeb"),w=Object(i["a"])(r,s,l,!1,null,"39305546",null);a["default"]=w.exports;c()(w,"components",{QCard:u["a"],QCardActions:m["a"],QBtn:p["a"],QTooltip:q["a"],QCardSection:b["a"],QForm:f["a"],QItemLabel:g["a"],QInput:_["a"],QSelect:x["a"],QUploader:v["a"],QIcon:h["a"],QPopupProxy:k["a"],QDate:y["a"]}),c()(w,"directives",{GoBack:C["a"]})}}]);