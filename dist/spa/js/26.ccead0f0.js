(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[26],{"55b3":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("q-card",[a("q-card-actions",{attrs:{align:"left"}},[a("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],staticStyle:{width:"150px"},attrs:{color:"red",icon:"reply",label:"ត្រឡប់ក្រោយ"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("ថយក្រោយ")])],1)],1),a("q-card-section",[a("q-form",{ref:"addForm",staticClass:"q-gutter-md",on:{submit:t.onSubmit}},[a("q-card",{staticClass:"my-card bg-grey-1",attrs:{flat:"",bordered:""}},[a("q-card-section",[a("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-item-label",{staticClass:"col q-my-sm"},[t._v("\n                បំពេញពត៍មាន\n              ")])],1),a("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-select",{staticClass:"col-md col-xs-12",attrs:{outlined:"",label:"ឈ្មោះអ្នកជម្ងឺ",options:t.getPatients,square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមជ្រើសរើសចន្លោះ"}]},model:{value:t.data.patient_obj,callback:function(e){t.$set(t.data,"patient_obj",e)},expression:"data.patient_obj"}}),a("q-select",{staticClass:"col-md col-xs-12",attrs:{outlined:"",label:"គ្រូទេព្យ",rules:[function(t){return!!t||"សូមជ្រើសរើសចន្លោះ"}],options:Object.freeze(t.doctorOptions),"use-input":""},on:{filter:t.filterFn},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"add"}},[a("q-popup-edit",{ref:"addCurrency",attrs:{title:"បន្ថែមគ្រូទេព្យ"},model:{value:t.doctor.doctor,callback:function(e){t.$set(t.doctor,"doctor",e)},expression:"doctor.doctor"}},[a("q-form",{ref:"formAddDoctor",on:{submit:t.storeDoctor}},[a("div",{staticClass:"row"},[a("q-input",{attrs:{label:"ឈ្មោះគ្រូទេព្យ",dense:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.doctor.doctor,callback:function(e){t.$set(t.doctor,"doctor",e)},expression:"doctor.doctor"}})],1),a("div",{staticClass:"row"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",color:"negative",flat:"",label:"បិទ","no-caps":""}}),a("q-space"),a("q-btn",{attrs:{dense:"",color:"primary",flat:"",label:"បន្ថែម","no-caps":""},on:{click:function(e){return t.$refs.formAddDoctor.submit()}}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.data.doctor,callback:function(e){t.$set(t.data,"doctor",e)},expression:"data.doctor"}}),a("q-input",{staticClass:"col-md col-xs-12",attrs:{outlined:"",label:"ចំណងជើង",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.title,callback:function(e){t.$set(t.data,"title",e)},expression:"data.title"}}),a("q-input",{staticClass:"col-md col-xs-12",attrs:{label:"ថ្ងៃពិនិត្យ",outlined:"",square:"",mask:"date",rules:["date"]},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxyLaboDate",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{on:{input:function(){return t.$refs.qDateProxyLaboDate.hide()}},model:{value:t.data.labo_date,callback:function(e){t.$set(t.data,"labo_date",e)},expression:"data.labo_date"}})],1)],1)]},proxy:!0}]),model:{value:t.data.labo_date,callback:function(e){t.$set(t.data,"labo_date",e)},expression:"data.labo_date"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.data.hem.length,expression:"data.hem.length"}],staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-item-label",{staticClass:"col-6 q-my-sm"},[a("b",[t._v("HEMATOLOGY")])]),a("q-item-label",{staticClass:"col q-my-sm text-center"},[a("b",[t._v("UNIT")])]),a("q-item-label",{staticClass:"col q-my-sm text-center"},[a("b",[t._v("REFERENCE")])]),a("q-item-label",{staticClass:"col-2 q-my-sm text-right"},[a("b",[t._v("REMOVE")])])],1),t._l(t.data.hem,(function(e,s){return a("div",{key:"hem"+s,staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-input",{staticClass:"col-6",attrs:{type:"number",label:e.name,"lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:e.result,callback:function(a){t.$set(e,"result",a)},expression:"item.result"}}),a("div",{staticClass:"col q-pt-lg text-center"},[t._v("\n                "+t._s(e.value)),a("sup",[t._v(t._s(e.superscript))]),t._v(t._s(e.unit)+"\n              ")]),a("div",{staticClass:"col q-pt-lg text-center"},[t._v("\n                (N: "+t._s(e.min.toFixed(2))+" - "+t._s(e.max.toFixed(2))+")\n              ")]),a("div",{staticClass:"col-2 q-pt-md text-right"},[a("q-btn",{attrs:{round:"",color:"negative",icon:"delete"},on:{click:function(e){return t.onRemove("hem",s)}}})],1)],1)})),a("div",{directives:[{name:"show",rawName:"v-show",value:t.data.leu.length,expression:"data.leu.length"}],staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-item-label",{staticClass:"col-6 q-my-sm"},[a("b",[t._v("LEUCOCYTAIRE")])]),a("q-item-label",{staticClass:"col q-my-sm text-center"},[a("b",[t._v("UNIT")])]),a("q-item-label",{staticClass:"col q-my-sm text-center"},[a("b",[t._v("REFERENCE")])]),a("q-item-label",{staticClass:"col-2 q-my-sm text-right"},[a("b",[t._v("REMOVE")])])],1),t._l(t.data.leu,(function(e,s){return a("div",{key:"leu"+s,staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-input",{staticClass:"col-6",attrs:{type:"number",label:e.name,"lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:e.result,callback:function(a){t.$set(e,"result",a)},expression:"item.result"}}),a("div",{staticClass:"col q-pt-lg text-center"},[t._v("\n                "+t._s(e.value)),a("sup",[t._v(t._s(e.superscript))]),t._v(t._s(e.unit)+"\n              ")]),a("div",{staticClass:"col q-pt-lg text-center"},[t._v("\n                (N: "+t._s(e.min.toFixed(2))+" - "+t._s(e.max.toFixed(2))+")\n              ")]),a("div",{staticClass:"col-2 q-pt-md text-right"},[a("q-btn",{attrs:{round:"",color:"negative",icon:"delete"},on:{click:function(e){return t.onRemove("leu",s)}}})],1)],1)})),a("div",{directives:[{name:"show",rawName:"v-show",value:t.data.bio.length,expression:"data.bio.length"}],staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-item-label",{staticClass:"col-6 q-my-sm"},[a("b",[t._v("BIOCHIMIE")])]),a("q-item-label",{staticClass:"col q-my-sm text-center"},[a("b",[t._v("UNIT")])]),a("q-item-label",{staticClass:"col q-my-sm text-center"},[a("b",[t._v("REFERENCE")])]),a("q-item-label",{staticClass:"col-2 q-my-sm text-right"},[a("b",[t._v("REMOVE")])])],1),t._l(t.data.bio,(function(e,s){return a("div",{key:"bio"+s,staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-input",{staticClass:"col-6",attrs:{type:"number",label:e.name,"lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:e.result,callback:function(a){t.$set(e,"result",a)},expression:"item.result"}}),a("div",{staticClass:"col q-pt-lg text-center"},[t._v("\n                "+t._s(e.value)),a("sup",[t._v(t._s(e.superscript))]),t._v(t._s(e.unit)+"\n              ")]),a("div",{staticClass:"col q-pt-lg text-center"},[null!==e.min&&null!==e.max?a("span",[t._v("(N: "+t._s(e.min)+" - "+t._s(e.max)+")")]):null===e.min&&null!==e.max||null!==e.min&&null===e.max?a("span",[t._v("(< "+t._s(e.max)+")")]):t._e()]),a("div",{staticClass:"col-2 q-pt-md text-right"},[a("q-btn",{attrs:{round:"",color:"negative",icon:"delete"},on:{click:function(e){return t.onRemove("bio",s)}}})],1)],1)})),a("div",{directives:[{name:"show",rawName:"v-show",value:t.data.ser.length,expression:"data.ser.length"}],staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-item-label",{staticClass:"col-6 q-my-sm"},[a("b",[t._v("SÉROLOGIE")])]),a("q-item-label",{staticClass:"col q-my-sm text-right"},[a("b",[t._v("REMOVE")])])],1),t._l(t.data.ser,(function(e,s){return a("div",{key:"ser"+s,staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-select",{staticClass:"col-6",attrs:{label:e.name,options:["Negative","Positive"],square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមជ្រើសរើសចន្លោះ"}]},model:{value:e.result,callback:function(a){t.$set(e,"result",a)},expression:"item.result"}}),a("div",{staticClass:"col q-pt-md text-right"},[a("q-btn",{attrs:{round:"",color:"negative",icon:"delete"},on:{click:function(e){return t.onRemove("ser",s)}}})],1)],1)}))],2),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{staticStyle:{width:"150px",height:"50px"},attrs:{icon:"save",color:"primary",label:"រក្សារទុក"},on:{click:function(e){return t.$refs.addForm.submit()}}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Save")])],1)],1)],1)],1)],1)],1)],1)},o=[],n=a("eb34"),r={name:"LaboAdd",data:function(){return{data:{patient_obj:"",patient:"",doctor:"",title:"",labo_date:"",hem:[],leu:[],bio:[],ser:[]},doctor:{doctor:null},doctorOptions:this.getDoctors}},computed:{getPatients:function(){var t=this;return t.$store.getters["patient/getPatient"].map((function(t){return{label:"".concat(t.kh_name,", ភេទ ").concat(t.gender,", អាយុ ").concat(t.age,", Tel: ").concat(t.phone),value:t._id}}))},getDoctors:function(){return this.$store.getters["doctor/getDoctors"].map((function(t){return t.doctor}))}},created:function(){var t=this;t.$store.dispatch("labo_setting/fetchLaboSetting").then((function(e){t.data.hem=e.data.filter((function(t){return"HEMATOLOGY"===t.type})),t.data.leu=e.data.filter((function(t){return"LEUCOCYTAIRE"===t.type})),t.data.bio=e.data.filter((function(t){return"BIOCHIMIE"===t.type})),t.data.ser=e.data.filter((function(t){return"SÉROLOGIE"===t.type}))}))},methods:{onSubmit:function(){var t=this;t.data.patient=t.data.patient_obj.value,t.$store.dispatch("labo/storeLabo",t.data).then((function(e){e.status?(t.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:e.message}),t.isShow=!1,window.history.back()):t.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:e.message})}))},onRemove:function(t,e){var a=this.data;"hem"===t?a.hem.splice(e,1):"leu"===t?a.leu.splice(e,1):"ser"===t?a.ser.splice(e,1):a.bio.splice(e,1)},dateFormat:function(t){return n["b"].formatDate(t,"DD/MM/YYYY")},filterFn:function(t,e){var a=this;e((function(){if(""===t)a.doctorOptions=a.getDoctors;else{var e=t.toLowerCase();a.doctorOptions=a.getDoctors.filter((function(t){return t.toLowerCase().indexOf(e)>-1}))}}))},storeDoctor:function(){var t=this;t.$store.dispatch("doctor/storeDoctor",t.doctor).then((function(e){e.status?(t.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:e.message}),t.data.doctor=e.data.doctor,t.doctor.doctor=null):t.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:e.message})}))}}},l=r,i=a("a6c2"),c=a("63c1"),u=a.n(c),d=a("505d"),m=a("5ce7"),p=a("84df"),b=a("ef9c"),v=a("3676"),q=a("7006"),f=a("3548"),g=a("dc7c"),x=a("f636"),_=a("4a24"),h=a("a3be"),C=a("dc01"),y=a("19dc"),w=a("5142"),E=a("7213"),k=a("406f"),$=a("f6b1"),O=Object(i["a"])(l,s,o,!1,null,"8bff5fd0",null);e["default"]=O.exports;u()(O,"components",{QPage:d["a"],QCard:m["a"],QCardActions:p["a"],QBtn:b["a"],QTooltip:v["a"],QCardSection:q["a"],QForm:f["a"],QItemLabel:g["a"],QSelect:x["a"],QPopupEdit:_["a"],QInput:h["a"],QSpace:C["a"],QIcon:y["a"],QPopupProxy:w["a"],QDate:E["a"]}),u()(O,"directives",{GoBack:k["a"],ClosePopup:$["a"]})}}]);