(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[43],{"0d37":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",{attrs:{padding:""}},[e("q-card",[e("q-card-section",{staticClass:"row items-center q-pb-none"},[e("div",{staticClass:"text-h5 text-bold"},[t._v("របាយការណ៍លក់ចេញ")]),e("q-space"),e("div",{staticClass:"q-pb-lg q-pr-md"},[e("q-btn-dropdown",{attrs:{push:"",split:"",color:"cyan","no-caps":""},scopedSlots:t._u([{key:"label",fn:function(){return[e("div",{staticClass:"row items-center no-wrap"},[e("q-icon",{attrs:{left:"",name:"event",size:"lg"}}),e("div",{staticClass:"text-center"},[t._v("\n                  ជ្រើសរើស"),e("br"),t._v("កាលបរិច្ឆេទ\n                ")])],1)]},proxy:!0}])},[e("q-list",[e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(a){return t.onItemClick(1)}}},[e("q-item-section",[e("q-item-label",[t._v("Yesterday")]),e("q-item-label",{attrs:{caption:""}},[t._v("ជ្រើសរើសម្សិលមិញ")])],1),e("q-item-section",{attrs:{side:""}},[e("q-icon",{attrs:{name:"info",color:"amber"}})],1)],1),e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(a){return t.onItemClick(2)}}},[e("q-item-section",[e("q-item-label",[t._v("Last week")]),e("q-item-label",{attrs:{caption:""}},[t._v("ជ្រើសរើស៧ថ្ងៃមុន")])],1),e("q-item-section",{attrs:{side:""}},[e("q-icon",{attrs:{name:"info",color:"amber"}})],1)],1),e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(a){return t.onItemClick(3)}}},[e("q-item-section",[e("q-item-label",[t._v("Last month")]),e("q-item-label",{attrs:{caption:""}},[t._v("ជ្រើសរើសខែមុន")])],1),e("q-item-section",{attrs:{side:""}},[e("q-icon",{attrs:{name:"info",color:"amber"}})],1)],1),e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(a){return t.onItemClick(4)}}},[e("q-item-section",[e("q-item-label",[t._v("Last year")]),e("q-item-label",{attrs:{caption:""}},[t._v("ជ្រើសរើសឆ្នាំមុន")])],1),e("q-item-section",{attrs:{side:""}},[e("q-icon",{attrs:{name:"info",color:"amber"}})],1)],1)],1)],1)],1),e("div",{staticClass:"row q-gutter-x-sm"},[e("q-input",{staticClass:"col",attrs:{label:"ថ្ងៃទិញចូល",outlined:"",square:"",mask:"date",rules:["date"]},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[e("q-popup-proxy",{ref:"qDateProxyStart",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-date",{on:{input:function(a){return t.getStartDate()}},model:{value:t.data.start_date,callback:function(a){t.$set(t.data,"start_date",a)},expression:"data.start_date"}})],1)],1)]},proxy:!0}]),model:{value:t.data.start_date,callback:function(a){t.$set(t.data,"start_date",a)},expression:"data.start_date"}}),e("q-input",{staticClass:"col",attrs:{label:"ថ្ងៃលក់ចេញ",outlined:"",square:"",mask:"date",rules:["date"]},on:{change:function(a){return t.getEndDate()}},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[e("q-popup-proxy",{ref:"qDateProxyEnd",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-date",{on:{input:function(a){return t.getEndDate()}},model:{value:t.data.end_date,callback:function(a){t.$set(t.data,"end_date",a)},expression:"data.end_date"}})],1)],1)]},proxy:!0}]),model:{value:t.data.end_date,callback:function(a){t.$set(t.data,"end_date",a)},expression:"data.end_date"}})],1)],1),e("q-card-section",[e("div",{staticClass:"row q-gutter-x-sm"},[e("q-card",{staticClass:"col my-card text-white",staticStyle:{background:"radial-gradient(circle, #1C9C64 0%, #505353 100%)"}},[e("q-card-section",[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"text-h3 text-bold"},[t._v("$"+t._s(t.getExpense))]),e("div",{staticClass:"text-subtitle2"},[t._v("ចំណាយ (Expenses)")])]),e("q-card-actions",[e("q-btn",{attrs:{size:"20px",icon:"fas fa-money-bill-wave",flat:"",round:""}})],1)],1)])],1),e("q-card",{staticClass:"col my-card text-white",staticStyle:{background:"radial-gradient(circle, #E5CA44 0%, #505353 100%)"}},[e("q-card-section",[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"text-h3 text-bold"},[t._v("$"+t._s(t.getTotalIndebted))]),e("div",{staticClass:"text-subtitle2"},[t._v("ជំពាក់គេ (Indebted)")])]),e("q-card-actions",[e("q-btn",{attrs:{size:"20px",icon:"fas fa-money-bill-wave",flat:"",round:""}})],1)],1)])],1),e("q-card",{staticClass:"col my-card text-white",staticStyle:{background:"radial-gradient(circle, #F15451 0%, #505353 100%)"}},[e("q-card-section",[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"text-h3 text-bold"},[t._v("$"+t._s(t.getTotalExpense))]),e("div",{staticClass:"text-subtitle2"},[t._v("ចំណាយសរុប (Total expenses)")])]),e("q-card-actions",[e("q-btn",{attrs:{size:"20px",icon:"fas fa-money-bill-wave",flat:"",round:""}})],1)],1)])],1)],1)]),e("q-card-section",[e("q-table",{staticClass:"table-virtual-scroll-stock",attrs:{data:t.getSales,columns:t.column_stock,"row-key":"_id",filter:t.filter,"virtual-scroll":"",pagination:t.pagination,"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"top-right",fn:function(){return[e("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(a){t.filter=a},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(a){return[e("q-tr",{staticClass:"cursor-pointer",attrs:{props:a},on:{click:function(e){return t.$router.push({path:"/sale/"+a.row._id+"/view"})}}},[e("q-td",{key:"description",staticClass:"q-gutter-x-xs",attrs:{props:a}},[e("q-input",{staticClass:"col",attrs:{readonly:"",type:"textarea",rows:"1",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:a.row.description,callback:function(e){t.$set(a.row,"description",e)},expression:"props.row.description"}})],1),e("q-td",{key:"paid_amount",staticClass:"q-gutter-x-xs text-primary",attrs:{props:a}},[e("span",{staticClass:"text-h6 text-bold"},[t._v("$"+t._s(a.row.paid_amount))])]),e("q-td",{key:"due_amount",staticClass:"q-gutter-x-xs text-warning",attrs:{props:a}},[e("span",{staticClass:"text-h6 text-bold"},[t._v("$"+t._s(a.row.due_amount))])]),e("q-td",{key:"amount",staticClass:"q-gutter-x-xs text-negative",attrs:{props:a}},[e("span",{staticClass:"text-h6 text-bold"},[t._v("$"+t._s(a.row.amount))])]),e("q-td",{key:"purchase_date",staticClass:"q-gutter-x-xs",attrs:{props:a}},[e("span",{staticClass:"text-h6"},[t._v(t._s(t.formatDateToString(a.row.sale_date)))])])],1)]}}])})],1)],1)],1)},n=[],r=e("52b5"),i=e.n(r),o=(e("c1c3"),e("549c")),c=e.n(o),l=e("eb34"),d={name:"SaleStockReport",data:function(){return{filter:"",pagination:{rowsPerPage:0},column_stock:[{align:"left",name:"description",label:"ចំណាំ",field:"description",sortable:!0},{align:"left",name:"paid_amount",label:"ថ្លៃចំណាយ",field:"paid_amount",sortable:!0},{align:"left",name:"due_amount",label:"ថ្លៃជំពាក់",field:"due_amount",sortable:!0},{align:"left",name:"amount",label:"សរុប",field:"amount",sortable:!0},{align:"left",name:"purchase_date",label:"ថ្ងៃនាំចូល",field:"purchase_date",sortable:!0}],data:{start_date:this.formatDate(l["b"].subtractFromDate(new Date,{month:1})),end_date:this.formatDate(new Date)}}},created:function(){var t=this;return c()(i.a.mark((function a(){return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("sale/fetchSaleByDate",t.data);case 2:case"end":return a.stop()}}),a)})))()},computed:{getSales:function(){return this.$store.getters["sale/getSalesByDate"].filter((function(t){return"Receive"===t.sale_status&&0!==t.amount}))},getExpense:function(){var t=0;return this.getSales.forEach((function(a){t+=a.paid_amount})),t},getTotalExpense:function(){var t=0;return this.getSales.forEach((function(a){t+=a.amount})),t},getTotalIndebted:function(){var t=0;return this.getSales.forEach((function(a){t+=a.due_amount})),t}},methods:{formatDate:function(t){return l["b"].formatDate(t,"YYYY-MM-DD")},formatDateToString:function(t){return l["b"].formatDate(t,"DD-MMM-YYYY")},onItemClick:function(t){1===t?this.data.start_date=this.formatDate(l["b"].subtractFromDate(new Date,{days:1})):2===t?this.data.start_date=this.formatDate(l["b"].subtractFromDate(new Date,{days:7})):3===t?this.data.start_date=this.formatDate(l["b"].subtractFromDate(new Date,{month:1})):4===t&&(this.data.start_date=this.formatDate(l["b"].subtractFromDate(new Date,{year:1}))),this.getStartDate()},getStartDate:function(){var t=this;return c()(i.a.mark((function a(){return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.$q.loading.show(),t.$refs.qDateProxyStart.hide(),a.next=4,t.$store.dispatch("sale/fetchSaleByDate",t.data);case 4:t.$q.loading.hide();case 5:case"end":return a.stop()}}),a)})))()},getEndDate:function(){var t=this;return c()(i.a.mark((function a(){return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.$q.loading.show(),t.$refs.qDateProxyEnd.hide(),a.next=4,t.$store.dispatch("sale/fetchSaleByDate",t.data);case 4:t.$q.loading.hide();case 5:case"end":return a.stop()}}),a)})))()}}},u=d,p=e("a6c2"),m=e("63c1"),f=e.n(m),b=e("505d"),q=e("5ce7"),v=e("7006"),x=e("dc01"),_=e("edd5"),h=e("19dc"),w=e("692f"),g=e("e0e9"),C=e("6c44"),y=e("dc7c"),k=e("a3be"),D=e("5142"),S=e("7213"),$=e("84df"),Q=e("ef9c"),E=e("3846"),I=e("3bc2"),P=e("7b08"),T=e("f6b1"),Y=Object(p["a"])(u,s,n,!1,null,"59c920b9",null);a["default"]=Y.exports;f()(Y,"components",{QPage:b["a"],QCard:q["a"],QCardSection:v["a"],QSpace:x["a"],QBtnDropdown:_["a"],QIcon:h["a"],QList:w["a"],QItem:g["a"],QItemSection:C["a"],QItemLabel:y["a"],QInput:k["a"],QPopupProxy:D["a"],QDate:S["a"],QCardActions:$["a"],QBtn:Q["a"],QTable:E["a"],QTr:I["a"],QTd:P["a"]}),f()(Y,"directives",{ClosePopup:T["a"]})}}]);