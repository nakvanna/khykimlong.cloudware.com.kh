(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[35],{9346:function(a,t,e){"use strict";e.r(t);var s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("q-page",[e("q-card",[e("q-card-actions",{attrs:{align:"left"}},[e("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],staticStyle:{width:"150px"},attrs:{color:"red",icon:"reply",label:"ត្រឡប់ក្រោយ"}},[e("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[a._v("ថយក្រោយ")])],1)],1),e("q-card-section",{staticClass:"text-center"},[e("span",{staticClass:"text-h3 text-bold text-uppercase"},[a._v(a._s(a.stock_data.sup_name))]),e("br"),e("span",{staticClass:"text-subtitle1"},[a._v("From "+a._s(a.stock_data.sup_company)+" purchased on "+a._s(a.dateFormat(a.stock_data.purchased_date)))])]),e("q-card-section",[e("div",{staticClass:"row q-gutter-x-sm"},[e("q-card",{staticClass:"col my-card text-primary"},[e("q-card-section",[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"text-h3 text-bold"},[a._v("$"+a._s(a.stock_data.amount))]),e("div",{staticClass:"text-subtitle2"},[a._v("តម្លៃសរុប (Amount)")])]),e("q-card-actions",[e("q-btn",{attrs:{size:"20px",icon:"fas fa-money-bill-wave",flat:"",round:""}})],1)],1)])],1),e("q-card",{staticClass:"col my-card text-warning"},[e("q-card-section",[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"text-h3 text-bold"},[a._v("$"+a._s(a.calPaidAmount))]),e("div",{staticClass:"text-subtitle2"},[a._v("បានចំណាយ (Paid)")])]),e("q-card-actions",[e("q-btn",{attrs:{size:"20px",icon:"fas fa-money-bill-wave",flat:"",round:""}})],1)],1)])],1),e("q-card",{staticClass:"col my-card text-negative"},[e("q-card-section",[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"text-h3 text-bold"},[a._v("$"+a._s(a.calDueAmount))]),e("div",{staticClass:"text-subtitle2"},[a._v("នៅជំពាក់ (Indebted)")])]),e("q-card-actions",[e("q-btn",{attrs:{size:"20px",icon:"fas fa-money-bill-wave",flat:"",round:""}})],1)],1)])],1)],1)]),e("q-card-section",[e("q-form",{ref:"addForm",staticClass:"q-gutter-md",on:{submit:a.onSubmit}},[e("div",{staticClass:"row q-gutter-x-sm"},[e("div",{staticClass:"col"},[e("q-input",{attrs:{outlined:"",prefix:"$",type:"number",min:"0",max:a.stock_data.due_amount,label:"ចំនួនត្រូវសង",square:""},model:{value:a.pay_back_data.pay_back,callback:function(t){a.$set(a.pay_back_data,"pay_back",t)},expression:"pay_back_data.pay_back"}})],1),e("q-input",{staticClass:"col",attrs:{label:"ថ្ងៃទីសង",outlined:"",square:"",mask:"date",rules:["date"]},scopedSlots:a._u([{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[e("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-date",{on:{input:function(){return a.$refs.qDateProxy.hide()}},model:{value:a.pay_back_data.pay_date,callback:function(t){a.$set(a.pay_back_data,"pay_date",t)},expression:"pay_back_data.pay_date"}})],1)],1)]},proxy:!0}]),model:{value:a.pay_back_data.pay_date,callback:function(t){a.$set(a.pay_back_data,"pay_date",t)},expression:"pay_back_data.pay_date"}})],1),e("div",{staticClass:"row q-gutter-x-sm"},[e("q-input",{staticClass:"col",attrs:{type:"textarea",rows:"3",outlined:"",label:"ចំណាំ",square:"","lazy-rules":"",rules:[function(a){return!!a||"សូមបំពេញចន្លោះ"}]},model:{value:a.pay_back_data.description,callback:function(t){a.$set(a.pay_back_data,"description",t)},expression:"pay_back_data.description"}})],1)])],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{staticStyle:{width:"150px",height:"50px"},attrs:{icon:"save",color:"primary",label:"រក្សារទុក"},on:{click:function(t){return a.$refs.addForm.submit()}}},[e("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[a._v("Save")])],1)],1),e("q-card-section",[e("q-table",{staticClass:"table-virtual-scroll-stock",attrs:{data:a.get_pay_back,columns:a.columns_payback,"row-key":"_id",filter:a.filter,"virtual-scroll":"",pagination:a.pagination,"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48},on:{"update:pagination":function(t){a.pagination=t}},scopedSlots:a._u([{key:"top-right",fn:function(){return[e("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:a._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:a.filter,callback:function(t){a.filter=t},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(t){return[e("q-tr",{staticClass:"cursor-pointer",attrs:{props:t},on:{click:function(e){return a.$router.push({path:"/stock/"+t.row._id+"/view"})}}},[e("q-td",{key:"description",attrs:{props:t}},[e("q-input",{staticClass:"col",attrs:{readonly:"",type:"textarea",rows:"1",square:"","lazy-rules":"",rules:[function(a){return!!a||"សូមបំពេញចន្លោះ"}]},model:{value:t.row.description,callback:function(e){a.$set(t.row,"description",e)},expression:"props.row.description"}})],1),e("q-td",[e("span",{staticClass:"text-bold"},[a._v("$"+a._s(t.row.pay_back))])]),e("q-td",[e("span",[a._v(a._s(a.dateFormat(t.row.pay_date)))])])],1)]}}])})],1)],1)],1)},n=[],c=e("52b5"),o=e.n(c),r=(e("1a43"),e("c1c3"),e("549c")),i=e.n(r),d=e("eb34"),l={name:"PayBack",data:function(){return{filter:"",pagination:{rowsPerPage:0},columns_payback:[{align:"left",name:"description",label:"ចំណាំ",field:"description",sortable:!0},{align:"left",name:"pay_back",label:"ចំនួនបានសង់",field:"pay_back",sortable:!0},{align:"left",name:"pay_date",label:"ថ្ងៃសង",field:"pay_date",sortable:!0}],get_pay_back:[],pay_back_data:{stock:this.$route.params.id,pay_back:0,pay_date:null,description:null},stock_data:{_id:this.$route.params.id,sup_name:"Supplier name",sup_company:"Supplier company",purchased_date:null,paid_amount:0,due_amount:0,amount:0}}},computed:{calDueAmount:function(){return parseFloat(this.stock_data.due_amount)-parseFloat(this.pay_back_data.pay_back)},calPaidAmount:function(){return parseFloat(this.stock_data.paid_amount)+parseFloat(this.pay_back_data.pay_back)}},created:function(){var a=this;return i()(o.a.mark((function t(){var e;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=a,e.$q.loading.show(),t.next=4,e.$store.dispatch("stock/editStock",e.$route.params.id).then(function(){var a=i()(o.a.mark((function a(t){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.stock_data.sup_name=t.data.supplier.name,e.stock_data.sup_company=t.data.supplier.company,e.stock_data.amount=t.data.amount,e.stock_data.paid_amount=t.data.paid_amount,e.stock_data.due_amount=t.data.due_amount,e.stock_data.purchased_date=t.data.purchase_date;case 6:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}());case 4:return t.next=6,e.$store.dispatch("stock/fetchStockPayBack",e.$route.params.id).then((function(a){e.get_pay_back=a.data}));case 6:e.$q.loading.hide();case 7:case"end":return t.stop()}}),t)})))()},methods:{dateFormat:function(a){return d["b"].formatDate(a,"DD/MM/YYYY")},onSubmit:function(){var a=this;a.$q.loading.show(),a.$store.dispatch("stock/updateStock",{_id:a.stock_data._id,paid_amount:a.calPaidAmount,due_amount:a.calDueAmount}).then(function(){var t=i()(o.a.mark((function t(e){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.status){t.next=3;break}return t.next=3,a.$store.dispatch("stock/stockPayBack",a.pay_back_data).then((function(t){t.status&&(window.history.back(),a.$q.loading.hide())}));case 3:case"end":return t.stop()}}),t)})));return function(a){return t.apply(this,arguments)}}())}}},p=l,u=e("a6c2"),_=e("63c1"),b=e.n(_),m=e("505d"),k=e("5ce7"),y=e("84df"),f=e("ef9c"),h=e("3676"),v=e("7006"),x=e("3548"),q=e("a3be"),w=e("19dc"),g=e("5142"),C=e("7213"),$=e("3846"),S=e("3bc2"),P=e("7b08"),Q=e("406f"),F=Object(u["a"])(p,s,n,!1,null,"3a3a7550",null);t["default"]=F.exports;b()(F,"components",{QPage:m["a"],QCard:k["a"],QCardActions:y["a"],QBtn:f["a"],QTooltip:h["a"],QCardSection:v["a"],QForm:x["a"],QInput:q["a"],QIcon:w["a"],QPopupProxy:g["a"],QDate:C["a"],QTable:$["a"],QTr:S["a"],QTd:P["a"]}),b()(F,"directives",{GoBack:Q["a"]})}}]);