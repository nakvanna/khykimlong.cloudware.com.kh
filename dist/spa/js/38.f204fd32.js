(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[38],{"08c4":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",[o("q-card",[o("q-card-actions",{attrs:{align:"left"}},[o("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],staticStyle:{width:"150px"},attrs:{color:"red",icon:"reply",label:"ត្រឡប់ក្រោយ"}},[o("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("ថយក្រោយ")])],1)],1),o("q-card-section",[o("q-img",{staticStyle:{height:"200px","max-width":"200px"},attrs:{src:t.data.hostname+t.data.photo}},[o("div",{staticClass:"absolute-bottom text-right no-padding"},[o("q-btn",{attrs:{icon:"edit",label:"កែប្រែ",flat:""}},[o("q-popup-edit",{model:{value:t.photo_prev,callback:function(e){t.photo_prev=e},expression:"photo_prev"}},[o("q-file",{staticStyle:{width:"300px"},attrs:{label:"ជ្រើសរើសរូបភាព",outlined:"",square:"",accept:"image/*",dense:"","lazy-rules":"",rules:[function(t){return!!t||"សូមជ្រើសរើស"}]},on:{input:t.photoFn},scopedSlots:t._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"attach_file"}})]},proxy:!0}]),model:{value:t.photo_prev,callback:function(e){t.photo_prev=e},expression:"photo_prev"}})],1)],1)],1)]),o("q-table",{attrs:{separator:"cell",title:"ព័ត៌មានទូទៅ",data:t.product_data,columns:t.columns_default1,"rows-per-page-options":[0],"hide-bottom":""},scopedSlots:t._u([{key:"body",fn:function(e){return[o("q-tr",{attrs:{props:e}},[o("q-td",{key:"name",attrs:{props:e}},[t._v("\n              "+t._s(e.row.name)+"\n              "),o("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(n){var a=n.initialValue,r=n.value,i=(n.emitValue,n.validate,n.set),c=n.cancel;return[o("q-input",{attrs:{dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[o("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),o("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(t){return t.stopPropagation(),i(t)},function(o){return t.updateProduct({id:t.data._id,data:{name:e.row.name}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.name,callback:function(o){t.$set(e.row,"name",o)},expression:"props.row.name"}})]}}],null,!0),model:{value:e.row.name,callback:function(o){t.$set(e.row,"name",o)},expression:"props.row.name"}})],1),o("q-td",{key:"type",attrs:{props:e}},[t._v("\n              "+t._s(e.row.type)+"\n              "),o("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(n){var a=n.initialValue,r=n.value,i=(n.emitValue,n.validate,n.set),c=n.cancel;return[o("q-select",{attrs:{outlined:"",label:"ប្រភេទ",options:t.getProductTypes,square:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[o("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),o("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(t){return t.stopPropagation(),i(t)},function(o){return t.updateProduct({id:t.data._id,data:{type:e.row.type}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.type,callback:function(o){t.$set(e.row,"type",o)},expression:"props.row.type"}})]}}],null,!0),model:{value:e.row.type,callback:function(o){t.$set(e.row,"type",o)},expression:"props.row.type"}})],1),o("q-td",{key:"unit",attrs:{props:e}},[t._v("\n              "+t._s(e.row.unit)+"\n              "),o("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(n){var a=n.initialValue,r=n.value,i=(n.emitValue,n.validate,n.set),c=n.cancel;return[o("q-select",{attrs:{outlined:"",label:"ប្រភេទ",options:t.getUnitTypes,square:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[o("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),o("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(t){return t.stopPropagation(),i(t)},function(o){return t.updateProduct({id:t.data._id,data:{unit:e.row.unit}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.unit,callback:function(o){t.$set(e.row,"unit",o)},expression:"props.row.unit"}})]}}],null,!0),model:{value:e.row.unit,callback:function(o){t.$set(e.row,"unit",o)},expression:"props.row.unit"}})],1)],1)]}}])})],1),o("q-card-section",[o("q-table",{attrs:{separator:"cell",data:t.product_data,columns:t.columns_default2,"rows-per-page-options":[0],"hide-bottom":""},scopedSlots:t._u([{key:"body",fn:function(e){return[o("q-tr",{attrs:{props:e}},[o("q-td",{key:"buy_price",attrs:{props:e}},[t._v("\n              "+t._s(e.row.buy_price)+"\n              "),o("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(n){var a=n.initialValue,r=n.value,i=(n.emitValue,n.validate,n.set),c=n.cancel;return[o("q-input",{attrs:{type:"number",dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[o("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),o("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(t){return t.stopPropagation(),i(t)},function(o){return t.updateProduct({id:t.data._id,data:{buy_price:e.row.buy_price}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.buy_price,callback:function(o){t.$set(e.row,"buy_price",o)},expression:"props.row.buy_price"}})]}}],null,!0),model:{value:e.row.buy_price,callback:function(o){t.$set(e.row,"buy_price",o)},expression:"props.row.buy_price"}})],1),o("q-td",{key:"sale_price",attrs:{props:e}},[t._v("\n              "+t._s(e.row.sale_price)+"\n              "),o("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(n){var a=n.initialValue,r=n.value,i=(n.emitValue,n.validate,n.set),c=n.cancel;return[o("q-input",{attrs:{type:"number",dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[o("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),o("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(t){return t.stopPropagation(),i(t)},function(o){return t.updateProduct({id:t.data._id,data:{sale_price:e.row.sale_price}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.sale_price,callback:function(o){t.$set(e.row,"sale_price",o)},expression:"props.row.sale_price"}})]}}],null,!0),model:{value:e.row.sale_price,callback:function(o){t.$set(e.row,"sale_price",o)},expression:"props.row.sale_price"}})],1),o("q-td",{key:"invent_type",attrs:{props:e}},[t._v("\n              "+t._s(e.row.invent_type)+"\n              "),o("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(n){var a=n.initialValue,r=n.value,i=(n.emitValue,n.validate,n.set),c=n.cancel;return[o("q-select",{attrs:{outlined:"",label:"ប្រភេទ",options:["Inventory-Part","Service","Sale-Only","Purchase-Only"],square:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[o("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),o("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(t){return t.stopPropagation(),i(t)},function(o){return t.updateProduct({id:t.data._id,data:{invent_type:e.row.invent_type}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.invent_type,callback:function(o){t.$set(e.row,"invent_type",o)},expression:"props.row.invent_type"}})]}}],null,!0),model:{value:e.row.invent_type,callback:function(o){t.$set(e.row,"invent_type",o)},expression:"props.row.invent_type"}})],1),o("q-td",{key:"stock_alert",attrs:{props:e}},[t._v("\n              "+t._s(e.row.stock_alert)+"\n              "),o("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(n){var a=n.initialValue,r=n.value,i=(n.emitValue,n.validate,n.set),c=n.cancel;return[o("q-input",{attrs:{type:"number",dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[o("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),o("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(t){return t.stopPropagation(),i(t)},function(o){return t.updateProduct({id:t.data._id,data:{stock_alert:e.row.stock_alert}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.stock_alert,callback:function(o){t.$set(e.row,"stock_alert",o)},expression:"props.row.stock_alert"}})]}}],null,!0),model:{value:e.row.stock_alert,callback:function(o){t.$set(e.row,"stock_alert",o)},expression:"props.row.stock_alert"}})],1)],1)]}}])})],1),o("q-card-section",[o("q-table",{attrs:{separator:"cell",data:t.product_data,columns:t.columns_default3,"rows-per-page-options":[0],"hide-bottom":""},scopedSlots:t._u([{key:"body",fn:function(e){return[o("q-tr",{attrs:{props:e}},[o("q-td",{key:"description",attrs:{props:e}},[t._v("\n              "+t._s(e.row.description)+"\n              "),o("q-popup-edit",{scopedSlots:t._u([{key:"default",fn:function(n){var a=n.initialValue,r=n.value,i=(n.emitValue,n.validate,n.set),c=n.cancel;return[o("q-input",{attrs:{type:"textarea",dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},scopedSlots:t._u([{key:"after",fn:function(){return[o("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),o("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:a===r},on:{click:[function(t){return t.stopPropagation(),i(t)},function(o){return t.updateProduct({id:t.data._id,data:{description:e.row.description}})}]}})]},proxy:!0}],null,!0),model:{value:e.row.description,callback:function(o){t.$set(e.row,"description",o)},expression:"props.row.description"}})]}}],null,!0),model:{value:e.row.description,callback:function(o){t.$set(e.row,"description",o)},expression:"props.row.description"}})],1)],1)]}}])})],1)],1)],1)},a=[],r=(o("1a43"),[{align:"left",name:"name",label:"ឈ្មោះទំនិញ",field:"name"},{align:"left",name:"type",label:"ប្រភេទ",field:"type"},{align:"left",name:"unit",label:"ឯកតា",field:"unit"}]),i=[{align:"left",name:"buy_price",label:"តម្លៃទិញ",field:"buy_price"},{align:"left",name:"sale_price",label:"តម្លៃលក់",field:"sale_price"},{align:"left",name:"invent_type",label:"ស្ដុក",field:"invent_type"},{align:"left",name:"stock_alert",label:"ស្ដុកជូនដំណឹង",field:"stock_alert"}],c=[{align:"left",name:"description",label:"ចំណាំ",field:"description"}],l={name:"ProductEdit",data:function(){return{dataPhoto:new FormData,photo_prev:null,product_data:[],columns_default1:r,columns_default2:i,columns_default3:c,data:{_id:null,hostname:"",photo:""}}},computed:{getProductTypes:function(){return this.$store.getters["product/getProductTypes"].map((function(t){return t.name}))},getUnitTypes:function(){return this.$store.getters["product/getUnitTypes"].map((function(t){return t.name}))}},methods:{photoFn:function(t){var e=this;e.dataPhoto.set("id",e.data._id),e.dataPhoto.set("photo",t);var o=new FileReader;o.readAsDataURL(t),o.onload=function(){e.data.photo=o.result,e.data.hostname=""},e.updateProductFile(e.dataPhoto)},updateProductFile:function(t){var e=this;t.set("id",e.data._id),e.$store.dispatch("product/updateProductThumbnail",t).then((function(t){t.status?e.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:t.message}):e.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.message})}))},updateProduct:function(t){var e=this;e.$store.dispatch("product/updateProduct",t).then((function(t){t.status?e.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:t.message}):e.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.message})}))}},created:function(){var t=this,e=t.data;t.$store.dispatch("product/editProduct",t.$route.params.id).then((function(o){e.hostname=o.data.hostname,e.photo=o.data.photo,e._id=o.data._id,t.product_data=[],t.product_data.push(o.data)}))}},s=l,u=o("a6c2"),p=o("63c1"),d=o.n(p),f=o("505d"),y=o("5ce7"),_=o("84df"),k=o("ef9c"),v=o("3676"),b=o("7006"),m=o("0798"),w=o("4a24"),g=o("af15"),q=o("19dc"),h=o("3846"),P=o("3bc2"),x=o("7b08"),S=o("a3be"),$=o("f636"),C=o("406f"),V=Object(u["a"])(s,n,a,!1,null,"61ba6600",null);e["default"]=V.exports;d()(V,"components",{QPage:f["a"],QCard:y["a"],QCardActions:_["a"],QBtn:k["a"],QTooltip:v["a"],QCardSection:b["a"],QImg:m["a"],QPopupEdit:w["a"],QFile:g["a"],QIcon:q["a"],QTable:h["a"],QTr:P["a"],QTd:x["a"],QInput:S["a"],QSelect:$["a"]}),d()(V,"directives",{GoBack:C["a"]})}}]);