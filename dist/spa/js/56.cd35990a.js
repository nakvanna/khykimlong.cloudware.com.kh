(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[56],{a575:function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("q-page",[e("q-card-section",[e("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[e("q-expansion-item",{attrs:{"expand-separator":"",icon:"perm_identity",duration:1e3,label:"ឈ្មោះ "+a.staff.lname+" "+a.staff.fname+" ភេទ "+a.staff.gender,caption:"ធនាគា៖ "+a.staff.bank_name+" លេខគណនី៖ "+a.staff.bank_account_no},model:{value:a.expand,callback:function(t){a.expand=t},expression:"expand"}},[e("q-card",[e("q-card-section",[e("q-form",{ref:"addForm",staticClass:"q-gutter-md",on:{submit:a.onSubmit}},[e("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[e("q-input",{staticClass:"col",attrs:{outlined:"",label:"ចំនួនលុយបើក",type:"number",square:"","lazy-rules":"",rules:[function(a){return!!a||"សូមបំពេញចន្លោះ"}]},model:{value:a.data.salary,callback:function(t){a.$set(a.data,"salary",t)},expression:"data.salary"}}),e("q-input",{staticClass:"col",attrs:{outlined:"",label:"ថ្ងៃបើកលុយ",square:"","lazy-rules":"",mask:"date",rules:[function(a){return!!a||"សូមបំពេញចន្លោះ"}]},scopedSlots:a._u([{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[e("q-popup-proxy",{ref:"dateDOB",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-date",{on:{input:function(){return a.$refs.dateDOB.hide()}},model:{value:a.data.pay_date,callback:function(t){a.$set(a.data,"pay_date",t)},expression:"data.pay_date"}})],1)],1)]},proxy:!0}]),model:{value:a.data.pay_date,callback:function(t){a.$set(a.data,"pay_date",t)},expression:"data.pay_date"}})],1),e("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[e("q-input",{staticClass:"col",attrs:{outlined:"",label:"ចំណាំ",type:"textarea",square:"","lazy-rules":"",rules:[function(a){return!!a||"សូមបំពេញចន្លោះ"}]},model:{value:a.data.description,callback:function(t){a.$set(a.data,"description",t)},expression:"data.description"}})],1)])],1),e("q-card-section",{attrs:{align:"right"}},[e("q-btn",{staticStyle:{color:"#FF0080"},attrs:{outline:"",label:"រក្សាទុក"},on:{click:function(t){return a.$refs.addForm.submit()}}})],1)],1)],1)],1)],1),e("q-separator",{attrs:{color:"orange",inset:""}}),e("q-card-section",[e("q-table",{attrs:{data:a.getStaffSalary,columns:a.columns_salary,pagination:a.pagination,"rows-per-page-options":[0],"hide-bottom":"",separator:"cell"},on:{"update:pagination":function(t){a.pagination=t}},scopedSlots:a._u([{key:"body",fn:function(t){return[e("q-tr",{attrs:{props:t}},[e("q-td",{key:"salary",attrs:{props:t}},[e("span",{staticClass:"text-bold text-h6"},[a._v(a._s(t.rowIndex+1))])]),e("q-td",{key:"salary",attrs:{props:t}},[e("span",{staticClass:"text-h6 text-bold"},[a._v("$"+a._s(t.row.salary.toFixed(2)))])]),e("q-td",{key:"description",staticClass:"q-gutter-x-xs",attrs:{props:t}},[e("q-input",{staticClass:"col",attrs:{readonly:"",type:"textarea",rows:"2",square:"","lazy-rules":"",rules:[function(a){return!!a||"សូមបំពេញចន្លោះ"}]},model:{value:t.row.description,callback:function(e){a.$set(t.row,"description",e)},expression:"props.row.description"}})],1),e("q-td",{key:"pay_date",attrs:{props:t}},[a._v("\n              "+a._s(a.dateFormat(t.row.pay_date))+"\n            ")])],1)]}}])})],1)],1)},r=[],s=e("967e"),o=e.n(s),i=(e("96cf"),e("fa84")),l=e.n(i),c=e("bd4c"),d=[{align:"left",name:"no",label:"ល.រ",field:"no"},{align:"left",name:"salary",label:"ប្រាក់ខែ",field:"salary"},{align:"left",name:"description",label:"ចំណាំ",field:"description"},{align:"left",name:"pay_date",label:"ថ្ងៃខែឆ្នាំបើក",field:"pay_date"}],u={name:"StaffSalary",data:function(){return{expand:!1,pagination:{rowsPerPage:0},columns_salary:d,staff:[],staff_salary:[],data:{salary:0,pay_date:null,description:"",staff:null}}},created:function(){var a=this;return l()(o.a.mark((function t(){var e,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=a,n=e.$route.params.id,e.$q.loading.show(),t.next=5,e.$store.dispatch("staff/fetchStaffForSalary",n).then(function(){var a=l()(o.a.mark((function a(t){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.staff=t.data,a.next=3,e.$store.dispatch("staff/fetchSalaryByStaff",n).then((function(){e.$q.loading.hide()}));case 3:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}());case 5:case"end":return t.stop()}}),t)})))()},computed:{getStaffSalary:function(){return this.$store.getters["staff/getStaffSalary"]}},methods:{onSubmit:function(){var a=this;a.data.staff=a.staff._id,a.$q.loading.show(),a.$store.dispatch("staff/storeStaffSalary",a.data).then(l()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.$store.dispatch("staff/fetchSalaryByStaff",a.$route.params.id);case 2:a.data={salary:0,pay_date:null,description:"",staff:null},a.expand=!1,a.$q.loading.hide();case 5:case"end":return t.stop()}}),t)}))))},dateFormat:function(a){return c["b"].formatDate(a,"DD/MM/YYYY")}}},p=u,f=e("2877"),y=e("eebe"),m=e.n(y),b=e("9989"),q=e("a370"),x=e("2c91"),h=e("9c40"),_=e("1c1c"),g=e("3b73"),w=e("f09f"),S=e("0378"),k=e("27f9"),v=e("0016"),$=e("7cbe"),Q=e("52ee"),C=e("eb85"),F=e("eaac"),D=e("bd08"),B=e("db86"),P=Object(f["a"])(p,n,r,!1,null,"612b0a2a",null);t["default"]=P.exports;m()(P,"components",{QPage:b["a"],QCardSection:q["a"],QSpace:x["a"],QBtn:h["a"],QList:_["a"],QExpansionItem:g["a"],QCard:w["a"],QForm:S["a"],QInput:k["a"],QIcon:v["a"],QPopupProxy:$["a"],QDate:Q["a"],QSeparator:C["a"],QTable:F["a"],QTr:D["a"],QTd:B["a"]})}}]);