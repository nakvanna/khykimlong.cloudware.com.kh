(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[52],{b6d8:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",[e("q-card",[e("q-card-actions",{attrs:{align:"left"}},[e("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],staticStyle:{width:"150px"},attrs:{color:"red",icon:"reply",label:"ត្រឡប់ក្រោយ"}},[e("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("ថយក្រោយ")])],1),e("q-space"),e("q-btn",{staticStyle:{width:"150px"},attrs:{color:"primary",icon:"print",label:"បោះពុម្ព"},on:{click:t.printPdf}},[e("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("បោះពុម្ព")])],1)],1),e("q-card-section",[e("q-table",{attrs:{title:"ព័ត៌មានលក់ចេញ",data:t.sale_data,columns:t.columns_default,"rows-per-page-options":[0],pagination:t.pagination,"hide-bottom":"",separator:"cell"},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"patient_name"},[e("span",{staticStyle:{"font-size":"large"}},[t._v("\n              "+t._s(a.row.patient.kh_name)+"\n              "),e("br"),t._v("\n              "+t._s(a.row.patient.lt_name)+"\n            ")])]),e("q-td",{key:"patient_contact",attrs:{props:a}},[e("span",{staticStyle:{"font-size":"large"}},[t._v("\n              "+t._s(a.row.patient.phone)+"\n            ")])]),e("q-td",{key:"description",attrs:{props:a}},[e("q-input",{staticClass:"col",attrs:{readonly:"",type:"textarea",rows:"3",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:a.row.description,callback:function(e){t.$set(a.row,"description",e)},expression:"props.row.description"}})],1),e("q-td",{key:"sale_status"},[e("span",{staticStyle:{"font-size":"large"}},[t._v("\n              "+t._s(a.row.sale_status)+"\n            ")])]),e("q-td",{key:"sale_date"},[e("span",{staticStyle:{"font-size":"large"}},[t._v("\n              "+t._s(t.dateFormat(a.row.sale_date))+"\n            ")])])],1)]}}])}),e("br"),e("q-separator",{attrs:{color:"orange",inset:""}}),e("br"),e("q-table",{attrs:{data:t.sale_detail_data,columns:t.columns_detail,pagination:t.pagination,"rows-per-page-options":[0],"hide-bottom":"",separator:"cell"},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"body",fn:function(a){return[e("q-tr",{attrs:{props:a}},[e("q-td",{key:"no"},[e("span",{staticStyle:{"font-size":"large"}},[t._v("\n              "+t._s(a.pageIndex+1)+"\n            ")])]),e("q-td",{key:"pro_name"},[e("span",{staticClass:"text-bold",staticStyle:{"font-size":"large"}},[t._v("\n              "+t._s(a.row.product.name)+"\n            ")])]),e("q-td",{key:"pro_description",attrs:{props:a}},[e("q-input",{staticClass:"col",attrs:{readonly:"",type:"textarea",rows:"1",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:a.row.product.description,callback:function(e){t.$set(a.row.product,"description",e)},expression:"props.row.product.description"}})],1),e("q-td",{key:"sale_qty"},[e("span",{staticStyle:{"font-size":"large"}},[t._v("\n              "+t._s(a.row.sale_qty)+"\n            ")])]),e("q-td",{key:"buy_price"},[e("span",{staticStyle:{"font-size":"large"}},[t._v("\n              $"+t._s(a.row.buy_price)+"\n            ")])]),e("q-td",{key:"sale_price"},[e("span",{staticStyle:{"font-size":"large"}},[t._v("\n              $"+t._s(a.row.sale_price)+"\n            ")])]),e("q-td",{key:"sale_status"},[e("span",{staticClass:"text-bold",staticStyle:{"font-size":"large"}},[t._v("\n              $"+t._s(a.row.sale_price*a.row.sale_qty)+"\n            ")])])],1)]}}])})],1),e("q-card-section",[e("div",{staticClass:"text-bold row q-gutter-x-sm q-mb-sm",staticStyle:{"font-size":"30px"}},[t._v("\n        តម្លៃសរុប: $"+t._s(t.data_amount.toFixed(2))+"\n      ")]),e("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[e("span",{staticClass:"col-1"}),e("span",{staticClass:"col-2 text-bold",staticStyle:{"font-size":"large"}},[e("u",[t._v("ថ្លៃចំណាយ: $"+t._s(t.data_paid.toFixed(2)))])]),e("span",{staticClass:"col-2 text-bold",staticStyle:{"font-size":"large"}},[e("u",[t._v("ថ្លៃជំពាក់: $"+t._s(t.data_due.toFixed(2)))])])])])],1)],1)},s=[],i=e("52b5"),l=e.n(i),r=(e("c1c3"),e("549c")),o=e.n(r),c=e("eb34"),d=[{align:"left",name:"patient_name",label:"អ្នកទិញ",field:"patient_name"},{align:"left",name:"patient_contact",label:"ទូរសព្ទ",field:"patient_contact"},{align:"left",name:"description",label:"ចំណាំ",field:"description"},{align:"left",name:"sale_status",label:"ស្ថានភាពលក់",field:"sale_status"},{align:"left",name:"sale_date",label:"ថ្ងៃខែឆ្នាំទិញ",field:"sale_date"}],p=[{align:"left",name:"no",label:"ល.រ",field:"no"},{align:"left",name:"pro_name",label:"ទំនិញ",field:"pro_name"},{align:"left",name:"pro_description",label:"ចំណាំ",field:"pro_description"},{align:"left",name:"sale_qty",label:"ចំនួនលក់ចេញ",field:"sale_qty"},{align:"left",name:"buy_price",label:"តម្លៃទិញ",field:"buy_price"},{align:"left",name:"sale_price",label:"តម្លៃលក់",field:"sale_price"},{align:"left",name:"total",label:"សរុប",field:"total"}],_={name:"SaleView",data:function(){return{pagination:{rowsPerPage:0},sale_data:[],sale_detail_data:[],columns_default:d,columns_detail:p,data_amount:0,data_paid:0,data_due:0}},created:function(){var t=this;return o()(l.a.mark((function a(){var e;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=t,a.next=3,e.$store.dispatch("sale/viewSale",e.$route.params.id).then(function(){var t=o()(l.a.mark((function t(a){var n;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=a.data._id,e.sale_data=[],e.sale_data.push(a.data),e.data_amount=a.data.amount,e.data_paid=a.data.paid_amount,e.data_due=a.data.due_amount,t.next=8,e.$store.dispatch("sale/fetchSaleDetailBySale",n).then(function(){var t=o()(l.a.mark((function t(a){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.sale_detail_data=[],e.sale_detail_data=a.data;case 2:case"end":return t.stop()}}),t)})));return function(a){return t.apply(this,arguments)}}());case 8:case"end":return t.stop()}}),t)})));return function(a){return t.apply(this,arguments)}}());case 3:case"end":return a.stop()}}),a)})))()},methods:{dateFormat:function(t){return c["b"].formatDate(t,"DD/MM/YYYY")},printPdf:function(){this.$store.dispatch("pdf_make/printSale",{data:this.sale_data,detail:this.sale_detail_data})}}},u=_,f=e("a6c2"),m=e("63c1"),b=e.n(m),y=e("505d"),g=e("5ce7"),w=e("84df"),q=e("ef9c"),v=e("3676"),h=e("dc01"),k=e("7006"),x=e("3846"),S=e("3bc2"),z=e("7b08"),$=e("a3be"),C=e("3f5f"),Q=e("406f"),F=Object(f["a"])(u,n,s,!1,null,"162e0318",null);a["default"]=F.exports;b()(F,"components",{QPage:y["a"],QCard:g["a"],QCardActions:w["a"],QBtn:q["a"],QTooltip:v["a"],QSpace:h["a"],QCardSection:k["a"],QTable:x["a"],QTr:S["a"],QTd:z["a"],QInput:$["a"],QSeparator:C["a"]}),b()(F,"directives",{GoBack:Q["a"]})}}]);