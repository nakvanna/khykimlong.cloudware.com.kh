(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[59],{7750:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",[a("q-card-actions",{attrs:{align:"left"}},[a("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],staticStyle:{width:"150px"},attrs:{color:"red",icon:"reply",label:"ត្រឡប់ក្រោយ"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("ថយក្រោយ")])],1)],1),a("q-card-section",[a("q-form",{ref:"addForm",staticClass:"q-gutter-md",on:{submit:t.onSubmit}},[a("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-item-label",{staticClass:"col q-my-sm"},[a("span",{staticClass:"text-bold"},[t._v(" អត្តបទអ្នកជម្ងឺ ")])])],1),a("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-select",{staticClass:"col",attrs:{outlined:"",label:"ឈ្មោះអ្នកជម្ងឺ",options:t.getPatients,square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមជ្រើសរើសចន្លោះ"}]},model:{value:t.data.patient_obj,callback:function(e){t.$set(t.data,"patient_obj",e)},expression:"data.patient_obj"}}),a("q-select",{staticClass:"col",attrs:{outlined:"",label:"ជ្រើសរើសបន្ទប់",options:t.getRooms,square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមជ្រើសរើសចន្លោះ"}]},model:{value:t.data.room_obj,callback:function(e){t.$set(t.data,"room_obj",e)},expression:"data.room_obj"}}),a("q-input",{staticClass:"col",attrs:{label:"ថ្ងៃពិនិត្យ",outlined:"",square:"",mask:"date",rules:["date"]},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{on:{input:function(){return t.$refs.qDateProxy.hide()}},model:{value:t.data.exa_date,callback:function(e){t.$set(t.data,"exa_date",e)},expression:"data.exa_date"}})],1)],1)]},proxy:!0}]),model:{value:t.data.exa_date,callback:function(e){t.$set(t.data,"exa_date",e)},expression:"data.exa_date"}})],1),a("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-input",{staticClass:"col",attrs:{outlined:"",label:"មូលហេតុសម្រាក",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.reason,callback:function(e){t.$set(t.data,"reason",e)},expression:"data.reason"}}),a("q-input",{staticClass:"col",attrs:{outlined:"",label:"ប្រវត្តិប្រតិកម្ម",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.his_reaction,callback:function(e){t.$set(t.data,"his_reaction",e)},expression:"data.his_reaction"}}),a("q-input",{staticClass:"col",attrs:{outlined:"",label:"ប្រវត្តិជំងឺ",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.his_ill,callback:function(e){t.$set(t.data,"his_ill",e)},expression:"data.his_ill"}})],1),a("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-select",{staticClass:"col",attrs:{square:"",outlined:"",label:"អតីតកាលជំងឺ","use-input":"","use-chips":"",multiple:"","input-debounce":"0",options:Object.freeze(t.ex_illOptions),"lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},on:{"new-value":t.createValue,filter:t.filterFn},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"add"}},[a("q-popup-edit",{ref:"addCurrency",attrs:{title:"បន្ថែមអតិតកាលជម្ងឺ"},model:{value:t.ex_ill.ex_ill,callback:function(e){t.$set(t.ex_ill,"ex_ill",e)},expression:"ex_ill.ex_ill"}},[a("q-form",{ref:"formAddExIll",on:{submit:t.storeExIll}},[a("div",{staticClass:"row"},[a("q-input",{attrs:{label:"អតិតកាលជម្ងឺ",dense:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.ex_ill.ex_ill,callback:function(e){t.$set(t.ex_ill,"ex_ill",e)},expression:"ex_ill.ex_ill"}})],1),a("div",{staticClass:"row"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",color:"negative",flat:"",label:"បិទ","no-caps":""}}),a("q-space"),a("q-btn",{attrs:{dense:"",color:"primary",flat:"",label:"បន្ថែម","no-caps":""},on:{click:function(e){return t.$refs.formAddExIll.submit()}}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.data.ex_ill,callback:function(e){t.$set(t.data,"ex_ill",e)},expression:"data.ex_ill"}})],1),a("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-input",{staticClass:"col",attrs:{outlined:"",label:"សភាពទូទៅ",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.gen_status,callback:function(e){t.$set(t.data,"gen_status",e)},expression:"data.gen_status"}}),a("q-input",{staticClass:"col",attrs:{outlined:"",label:"កំដៅ",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.heat,callback:function(e){t.$set(t.data,"heat",e)},expression:"data.heat"}}),a("q-input",{staticClass:"col",attrs:{outlined:"",label:"សំពាធឈាម",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.blood_pressure,callback:function(e){t.$set(t.data,"blood_pressure",e)},expression:"data.blood_pressure"}})],1),a("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-input",{staticClass:"col",attrs:{outlined:"",label:"ជីពចរ",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.pulse,callback:function(e){t.$set(t.data,"pulse",e)},expression:"data.pulse"}}),a("q-input",{staticClass:"col",attrs:{outlined:"",label:"Spo2",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.spo,callback:function(e){t.$set(t.data,"spo",e)},expression:"data.spo"}}),a("q-input",{staticClass:"col",attrs:{outlined:"",label:"ទំងន់",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.weight,callback:function(e){t.$set(t.data,"weight",e)},expression:"data.weight"}})],1),a("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-input",{staticClass:"col",attrs:{outlined:"",label:"សញ្ញាតំអូញ",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.signal_ill,callback:function(e){t.$set(t.data,"signal_ill",e)},expression:"data.signal_ill"}}),a("q-input",{staticClass:"col",attrs:{outlined:"",label:"រូបសញ្ញា",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.mark_ill,callback:function(e){t.$set(t.data,"mark_ill",e)},expression:"data.mark_ill"}})],1),a("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-input",{staticClass:"col",attrs:{outlined:"",label:"រោគវិនិច្ឆ័យចូល",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.diagnose_in,callback:function(e){t.$set(t.data,"diagnose_in",e)},expression:"data.diagnose_in"}})],1),a("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-input",{staticClass:"col",attrs:{outlined:"",label:"ការពិនិត្យអម",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.check_at,callback:function(e){t.$set(t.data,"check_at",e)},expression:"data.check_at"}})],1),a("div",{staticClass:"row q-gutter-x-sm q-mb-sm"},[a("q-input",{staticClass:"col",attrs:{outlined:"",label:"រោគវិនិច្ឆ័យចេញ",square:"","lazy-rules":"",rules:[function(t){return!!t||"សូមបំពេញចន្លោះ"}]},model:{value:t.data.diagnose_out,callback:function(e){t.$set(t.data,"diagnose_out",e)},expression:"data.diagnose_out"}})],1)])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{staticStyle:{width:"150px",height:"50px"},attrs:{icon:"save",color:"primary",label:"រក្សារទុក"},on:{click:function(e){return t.$refs.addForm.submit()}}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Save")])],1)],1)],1)},s=[],n=(a("a0c4"),a("1a43"),["លើសសំពាធឈាម","របេង","ទឹកនោមផ្អែម"]),o={name:"ExamineAdd",data:function(){return{data:{patient_obj:"",patient:"",room_obj:"",room:"",exa_date:"",reason:"",his_reaction:"",his_ill:"",ex_ill:[],gen_status:"",heat:"",blood_pressure:"",pulse:"",spo:"",weight:"",signal_ill:"",mark_ill:"",diagnose_in:"",check_at:"",diagnose_out:"",is_stay:!0},ex_ill:{ex_ill:null},ex_illOptions:this.getExIlls,filterOptions:n}},computed:{getExIlls:function(){return this.$store.getters["ex_ill/getExIlls"].map((function(t){return t.ex_ill}))},getPatients:function(){var t=this;return t.$store.getters["patient/getPatient"].map((function(t){return{label:"".concat(t.kh_name,", ភេទ ").concat(t.gender,", អាយុ ").concat(t.age," Tel: ").concat(t.phone),value:t._id}}))},getRooms:function(){return this.$store.getters["room/getFreeRoom"].map((function(t){return{label:t.name,value:t._id}}))}},methods:{storeExIll:function(){var t=this;t.$store.dispatch("ex_ill/storeExIll",t.ex_ill).then((function(e){e.status?(t.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:e.message}),t.data.ex_ill.push(e.data.ex_ill),t.ex_ill.ex_ill=null):t.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:e.message})}))},onSubmit:function(){var t=this;t.data.patient=t.data.patient_obj.value,t.data.room=t.data.room_obj.value,t.$store.dispatch("examine/storeExamine",t.data).then((function(e){e.status?(t.$store.dispatch("room/fetchRoom"),window.history.back(),t.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:e.message})):t.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:e.message})}))},createValue:function(t,e){t.length>2&&(n.includes(t)||e(t,"add-unique"))},filterFn:function(t,e){var a=this;e((function(){if(""===t)a.ex_illOptions=a.getExIlls;else{var e=t.toLowerCase();a.ex_illOptions=a.getExIlls.filter((function(t){return t.toLowerCase().indexOf(e)>-1}))}}))}}},i=o,r=a("a6c2"),u=a("63c1"),c=a.n(u),d=a("5ce7"),p=a("84df"),m=a("ef9c"),f=a("3676"),x=a("7006"),b=a("3548"),_=a("dc7c"),q=a("f636"),g=a("a3be"),v=a("19dc"),h=a("5142"),C=a("7213"),k=a("4a24"),y=a("dc01"),w=a("406f"),$=a("f6b1"),z=Object(r["a"])(i,l,s,!1,null,"74638399",null);e["default"]=z.exports;c()(z,"components",{QCard:d["a"],QCardActions:p["a"],QBtn:m["a"],QTooltip:f["a"],QCardSection:x["a"],QForm:b["a"],QItemLabel:_["a"],QSelect:q["a"],QInput:g["a"],QIcon:v["a"],QPopupProxy:h["a"],QDate:C["a"],QPopupEdit:k["a"],QSpace:y["a"]}),c()(z,"directives",{GoBack:w["a"],ClosePopup:$["a"]})}}]);